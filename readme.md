_This readme was generated by AI_

# Spring Security POC with HTTP Basic Auth

This is a simple Proof of Concept (POC) demonstrating how to configure Spring Security using HTTP Basic Authentication with in-memory users and role-based access control.

---

## ✅ Features

- Spring Boot + Spring Security
- In-memory user authentication
- HTTP Basic Authentication
- Method-level security using `@Secured`
- REST endpoints protected by authentication
- Simple role-based access control

---

## 📌 Endpoints

| Method | Endpoint | Access Control       | Description                      |
|--------|----------|----------------------|----------------------------------|
| GET    | `/`      | Public (no auth)     | Returns a success message        |
| POST   | `/`      | Authenticated users  | Requires Basic Auth login        |
| PUT    | `/`      | Authenticated users  | Requires Basic Auth login        |

---

## 👤 Users

Two in-memory users are configured:

| Username   | Password  | Role        |
|------------|-----------|-------------|
| `userPost` | `password` | `ROLE_POST` |
| `userPut`  | `password` | `ROLE_PUT`  |

> ⚠️ **Note:** Passwords are stored in plain text using `{noop}` encoding. This is for testing **only** — never use this in production.

---

## 🚀 Running the Application

Ensure you have the following installed:

- Java 21+
- Maven

Run the application:

```bash
./mvnw spring-boot:run
````

---

## 🐳 Running with Docker

Make sure Docker is installed and running.

### 1. Build the Docker image

From the project root (where the `Dockerfile` is located):

```bash
docker build -t [your-dockerhub-username]/[image-name]:[version] .
```

### 2. Run the container

Make sure the `[container-port]` matches the `EXPOSE` value in your Dockerfile.

```bash
docker run -p [host-port]:[container-port] --name [container-name] -d [your-dockerhub-username]/[image-name]:[version]
```

✅ **Example:**

```bash
docker run -p 8080:3000 --name spring-sec-poc-api-container -d goncodev/spring-security-poc-api:1.0
```

---

## ☸️ Running on Kubernetes (with Minikube)

This project was tested using **Minikube** running on **Ubuntu 24.04 under WSL**.

### 🛠️ Build image inside Minikube

To avoid having to push the image to Docker Hub, you can build it directly inside the Minikube Docker daemon:

```bash
eval $(minikube docker-env)
```

Then build the Docker image:

```bash
docker build -t spring-security-poc-api:1.0 .
```

Minikube will now have access to the image locally.

### 🚀 Apply the resources

At the folder '/k8s-resources' run the following command:
```bash
kubectl apply -f .
```
---
**Important** note that: Using kubernetes with WSL, localhost doesn't work, if you're running minikube just like me,  
you'll need to access the endpoints by the node IP and the port above 30000.  

Node IP can be found using the following command: `kubectl get nodes -o wide`  
The port is stored at service-nodeport-poc-security-example.yml > ports > nodePort.

---
## ☸️ Running on with Helm (with K8s/Minikube)


### 🛠️ Follow the steps of K8s
The helm version is made to run a simple example with templates, so follow the k8s version until building the image  
in the minikube env.

### Next steps
1. Go to chart/poc-security-example-api-chart
2. Run the following command.
```bash
helm install spring-sec-api .
```
3. Go and test the application.
## 📄 License

This project is provided for educational purposes and is not intended for production use. Feel free to fork and adapt as needed.
